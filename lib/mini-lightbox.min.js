(function(e){function t(e,t){for(var n=document.querySelectorAll(e),o=0;n.length>o;o++)if(n[o]===t)return!0;return!1}function n(e){var c=e.selector||e,i=document.querySelectorAll(c),l=function(e){var t=this.id,c=o[t];if(t||this.setAttribute("id",t="ml_"+Math.random().toString(36)),c)n.open(t);else{var i=document.createElement("div");i.setAttribute("class","ml_box");var l=document.createElement("img");l.setAttribute("src",this.getAttribute("data-image-opened")||this.src),i.appendChild(l),i.addEventListener("click",function(){n.close(t)}),o[t]={el:this,box:i,img:l,opened:!1},document.body.appendChild(i),n.open(t)}e.preventDefault()};if(e.delegation)return document.querySelector(e.delegation).addEventListener("click",function(n){for(var o=n.target,c=[o];o;)c.push(o=o.parentNode);for(var i=0;c.length>i;++i){var r=c[i];if(t(e.selector,r)&&(o=r))break}o&&"IMG"===o.tagName&&!o.parentNode.classList.contains("ml_box")&&l.call(o,n)});for(var r=0;i.length>r;++r)(function(e){e.addEventListener("click",l)})(i[r])}e.addEventListener("scroll",function(){n.close()}),e.addEventListener("keydown",function(e){27===e.which&&n.close()}),n.close=function(e){if(e)o[e].opened&&(o[e].opened=!1,("function"!=typeof n.customClose||n.customClose.call(o[e])!==!1)&&(o[e].box.style.display="none"));else for(var t=Object.keys(o),c=0;t.length>c;++c)n.close(t[c])},n.open=function(e){o[e].opened||(o[e].opened=!0,("function"!=typeof n.customOpen||n.customOpen.call(o[e])!==!1)&&(o[e].box.style.display="block"))};var o=n._cache={};e.MiniLightbox=n})(window);
